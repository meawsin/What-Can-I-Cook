<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Add Ingredients</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    body {
        background-image: url('bg_ingredients-copy.png');
        background-size: cover;
        background-position: center;
      }
    .ingredient-selected {
      background-color: #f3b517 !important; /* yellow-400 */
    }
  </style>
</head>
<body class="min-h-screen bg-yellow-100 text-black font-sans">
  <!-- Authenticated Navbar (copied from user.html, with active page logic) -->
<script>
  function checkAuthStatus() {
    const token = localStorage.getItem('token');
    const userInfo = localStorage.getItem('userInfo');
    if (!token || !userInfo) return false;
    try {
      const user = JSON.parse(userInfo);
      if (!user || !user.token) return false;
      return true;
    } catch (error) { return false; }
  }
  function logout() {
    localStorage.removeItem('token');
    localStorage.removeItem('userInfo');
    window.location.href = 'index.html';
  }
  document.addEventListener('DOMContentLoaded', () => {
    if (!checkAuthStatus()) {
      window.location.href = 'login.html';
      return;
    }
    // Insert navbar
    const nav = document.createElement('nav');
    nav.className = 'bg-yellow-500 p-4 shadow-md flex flex-wrap justify-between items-center';
    nav.innerHTML = `
      <div class="flex items-center space-x-3">
        <a href="home.html"><img src="images/logo-removebg.png" alt="Logo" class="w-20 h-25"></a>
        <a href="home.html"><span class="text-xl font-bold">What Can I Cook?</span></a>
      </div>
      <div class="flex space-x-4 text-black font-semibold">
        <a href="home.html" class="nav-link">Home</a>
        <a href="user.html" class="nav-link">Profile</a>
        <a href="recipes.html" class="nav-link">Recipes</a>
        <a href="favourites.html" class="nav-link">Favourites</a>
        <a href="upload.html" class="nav-link">Add Recipe List</a>
        <a href="about.html" class="nav-link">About Us</a>
        <button onclick="logout()" class="hover:underline text-red-700">Logout</button>
      </div>
    `;
    document.body.prepend(nav);
    // Highlight current page
    const path = window.location.pathname.split('/').pop();
    document.querySelectorAll('.nav-link').forEach(link => {
      if (link.getAttribute('href') === path) {
        link.classList.add('underline', 'text-yellow-900');
      }
    });
    // Insert footer
    const footer = document.createElement('footer');
    footer.className = 'text-center py-6 text-sm text-gray-600';
    footer.innerHTML = '&copy; 2025 What Can I Cook? All rights reserved.';
    document.body.appendChild(footer);
    // Remove old header/footer if present
    const oldHeader = document.querySelector('header');
    if (oldHeader) oldHeader.remove();
    const oldFooter = document.querySelector('footer');
    if (oldFooter) oldFooter.remove();
  });
</script>

  <div class="max-w-2xl mx-auto py-6 px-4">
    <h1 class="text-3xl font-bold text-yellow-700 mb-6 flex items-center gap-2">
      ðŸ›’ Add Ingredients
    </h1>

    <input type="text" placeholder="Search ingredients..."
      class="w-full px-4 py-2 mb-4 border border-yellow-500 rounded-full focus:outline-none focus:ring-2 focus:ring-yellow-600">

    <div id="categories"></div>

    <div class="mt-8 text-center">
      <button onclick="suggestRecipes()"
        class="px-6 py-3 bg-yellow-600 text-white font-bold rounded-full hover:bg-yellow-700 transition-colors">
        Suggest Recipes
      </button>
    </div>
  </div>

  <script>
    const data = [
      {
        name: "Pantry Essentials",
        icon: "ðŸ—ƒï¸",
        ingredients: ["salt", "sugar", "oil", "vinegar"]
      },
      {
        name: "Vegetables & Greens",
        icon: "ðŸ¥¦",
        ingredients: ["carrot", "tomato", "cucumber", "zucchini", "spinach"]
      },
      {
        name: "Fruits",
        icon: "ðŸŽ",
        ingredients: ["apple", "banana", "mango", "grape", "pineapple", "watermelon",
      "passionfruit", "tangerine", "dragonfruit", "jackfruit"]
      },
      {
        name: "Fish & Meats",
        icon: "ðŸ¥©",
        ingredients: [ "tilapia", "salmon", "hilsa", "rohu",  "katla", "tuna",
      // Meats
      "chicken", "beef", "lamb", "goat",
      "duck", "chicken breast", "mutton"]
      },
      {
        name: "Berries",
        icon: "ðŸ¥ž",
        ingredients: ["strawberry", "blueberry", "raspberry"]
      },
      {
        name: "Nuts & Seeds",
        icon: "ðŸ¥œ",
        ingredients: ["almond", "walnut", "peanut", "cashew"]
      },
      {
        name: "Cheeses",
        icon: "ðŸ§€",
        ingredients: ["cheddar", "mozzarella", "feta"]
      }
    ];

    const categoriesContainer = document.getElementById("categories");

    data.forEach((category, index) => {
      const wrapper = document.createElement("div");
      wrapper.className = "bg-white rounded-xl p-4 shadow-md mb-4";

      const header = document.createElement("div");
      header.className = "flex justify-between items-center cursor-pointer text-yellow-800 font-semibold text-lg mb-2";
      header.innerHTML = `<span>${category.icon} ${category.name}</span><span class="text-black">&#9650;</span>`;

      const ingredientsContainer = document.createElement("div");
      ingredientsContainer.className = "grid grid-cols-3 gap-2";
      category.ingredients.forEach(ingredient => {
        const item = document.createElement("div");
        item.textContent = ingredient;
        item.className = "px-4 py-2 rounded-full bg-yellow-200 text-black text-sm text-center cursor-pointer transition-all duration-150";
        item.addEventListener("click", () => {
          item.classList.toggle("ingredient-selected");
        });
        ingredientsContainer.appendChild(item);
      });

      header.addEventListener("click", () => {
        ingredientsContainer.classList.toggle("hidden");
        header.querySelector("span:last-child").innerHTML = ingredientsContainer.classList.contains("hidden") ? "&#9660;" : "&#9650;";
      });

      wrapper.appendChild(header);
      wrapper.appendChild(ingredientsContainer);
      categoriesContainer.appendChild(wrapper);
    });

    function suggestRecipes() {
      const selected = Array.from(document.querySelectorAll('.ingredient-selected')).map(el => el.textContent);
      alert("Selected Ingredients: " + selected.join(", "));
    }
  </script>
</body>
</html>
